<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Map Builder</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="brand">
        <div class="logo">MB</div>
        <div>
          <h1>Map Builder</h1>
          <p>Create and share custom maps in minutes.</p>
        </div>
      </div>
      <div class="actions">
        <button id="newMap">New Map</button>
        <label class="file-btn">
          Load Map
          <input type="file" id="loadMap" accept="application/json" />
        </label>
        <button id="saveMap" class="ghost">Save to File</button>
        <button id="generateEmbed" class="primary">Generate Embed Code</button>
      </div>
    </header>

    <div class="layout">
      <aside class="sidebar">
        <section>
          <h2>Map details</h2>
          <label>Title</label>
          <input id="mapTitle" type="text" placeholder="Untitled map" />
          <label>Description</label>
          <textarea id="mapDescription" rows="3" placeholder="What is this map about?"></textarea>
        </section>

        <section>
          <h2>View</h2>
          <div class="grid two">
            <div>
              <label>Center lat</label>
              <input id="centerLat" type="number" step="0.0001" />
            </div>
            <div>
              <label>Center lng</label>
              <input id="centerLng" type="number" step="0.0001" />
            </div>
          </div>
          <label>Zoom</label>
          <input id="zoom" type="number" min="1" max="19" />
          <label>Base map</label>
          <select id="baseLayer">
            <option value="streets">Streets</option>
            <option value="terrain">Terrain</option>
            <option value="toner">Grayscale</option>
          </select>
        </section>

        <section>
          <h2>Layers</h2>
          <div id="layerList" class="layer-list empty">
            <p>No layers yet. Add one from the toolbar.</p>
          </div>
        </section>
      </aside>

      <main class="map-area">
        <div id="map"></div>
        <div class="floating-toolbar">
          <button data-tool="marker">Add Marker</button>
          <button data-tool="polygon">Draw Polygon</button>
          <button data-tool="rectangle">Draw Rectangle</button>
          <button data-tool="circle">Draw Circle</button>
          <button data-tool="polyline">Draw Polyline</button>
          <button data-tool="edit">Select / Edit</button>
        </div>
      </main>
    </div>

    <div id="modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalTitle">Edit layer</h3>
          <button id="closeModal" class="icon-btn" aria-label="Close">×</button>
        </div>
        <form id="layerForm" class="form"></form>
      </div>
    </div>

    <div id="embedModal" class="modal hidden">
      <div class="modal-content wide">
        <div class="modal-header">
          <h3>Embed snippet</h3>
          <button id="closeEmbed" class="icon-btn" aria-label="Close">×</button>
        </div>
        <p>Copy and paste this HTML into your site. It is fully self-contained.</p>
        <textarea id="embedOutput" readonly></textarea>
        <div class="modal-actions">
          <button id="copyEmbed">Copy to Clipboard</button>
        </div>
      </div>
    </div>

    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>
    <script src="app.js"></script>
  </body>
</html>
